<!doctype html>
<html lang=”en”>

<head>
    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
    <meta charset=utf-8 />
    <title>Barracuda</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <input type="file" id="upload-btn" onchange="readURL(this);" hidden />
    <label for="upload-btn">Upload 🐟</label>

    <img id="uploaded" src="placeholder.png" />
    <div id="infodiv" class="info">
        Test
    </div>
    <div class="loader">🐬</div>

    <!-- Load ONNX.js -->
    <script src="https://cdn.jsdelivr.net/npm/onnxjs/dist/onnx.min.js"></script>
    <!-- Custom JS -->
    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#uploaded')
                        .attr('src', e.target.result)
                };

                reader.readAsDataURL(input.files[0]);
                updateInfo("Identifying...")
                document.getElementsByClassName('loader')[0].style.opacity = 1;
            }
        }

        function updateInfo(content) {
            document.getElementById('infodiv').innerHTML
                = content;
        }

        // create a session
        const myOnnxSession = new onnx.InferenceSession();
        // load the ONNX model file

        myOnnxSession.loadModel("./model.onnx").then(() => {
            // generate model input
            console.log("Loaded")
            const inferenceInputs = getInputs();
            // execute the model
            myOnnxSession.run(inferenceInputs).then((output) => {
                // consume the output
                const outputTensor = output.values().next().value;
                console.log(`model output tensor: ${outputTensor.data}.`);
            });
        });</script>
    <!--<script src="app.js"></script>-->
</body>

</html>